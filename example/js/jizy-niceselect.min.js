/*! NiceSelect v1.0.0 | MIT | 2025-10-29T22:29Z | [example] */
!function(e){"use strict";if("object"!=typeof e||!e||!e.document)throw new Error("NiceSelect requires a window with a document");if(void 0!==e.NiceSelect)throw new Error("NiceSelect is already defined");var t=function(){class e{static fromData(t,s=!1){const i=new e(s);return i.setElement(document.createElement("select")),s&&i.el.setAttribute("multiple",s),t.forEach(t=>{t=e.parseItemData(t);const s=e.createOptionElement(t);t.option=s,i.el.appendChild(s),i.data.push(t)}),document.body.appendChild(i.el),i}static fromSelect(t){const s=null!=t.getAttribute("multiple"),i=new e(s);return i.setElement(t),i.el.querySelectorAll("option[value]").forEach(t=>{if(""===t.value)return;if("0"===t.value)return;if(!t.value)return;const s=e.parseItemData({text:t.innerText,value:t.value,selected:null!=t.getAttribute("selected"),disabled:null!=t.getAttribute("disabled"),option:t});i.items.push(s)}),i}static generateUid(){return"xxxxxxxx".replace(/[x]/g,function(e){return(16*Math.random()|0).toString(16)})}static createOptionElement(e){const t=document.createElement("option");return t.value=e.value,t.textContent=e.text,t.setAttribute("selected",e.selected?"true":null),t.setAttribute("disabled",e.disabled?"true":null),t.setAttribute("data-nice-uuid",e.uuid),t}static parseItemData(t){return Object.assign({text:"",value:"",selected:!1,disabled:!1,visible:!0,uuid:e.generateUid(),option:null},t)}constructor(e=!1){this.multiple=e,this.el=null,this.items=[]}setElement(e){return this.el=e,this.el.style.display="none",this}getElement(){return this.el}getItems(){return this.items}getItem(e){return this.items.find(t=>t.value===e)}getSelection(){return this.items.filter(e=>e.selected)}select(e){if(console.dir(this.items),e.selected){const t=this.items.find(t=>t.value===e.value);t.selected=!1,t.option.selected=!1}else this.multiple?(e.selected=!0,e.option.selected=!0):this.items.forEach(t=>{const s=t.value===e.value;t.selected=s,t.option.selected=s});return console.dir(this.items),this}reset(){return this.items.forEach(e=>{e.visible=!0,e.selected=!1,e.option.selected=!1}),this.items}filter(e){return this.items.forEach(t=>{t.visible=!e||t.text.toLowerCase().includes(e.toLowerCase())}),this.items}}class t{constructor(e={}){this.className=e.className||"dropdown",this.selectedClassName=e.selectedClassName||"selected",this.disabledClassName=e.disabledClassName||"disabled",this.onItemSelected=e.onItemSelected||(e=>{console.log("Item selected",e)}),this.setItems(e.items||[]),this.el=null}setItems(e=[]){return this.items=e,this}destroy(){this.el&&(this.el.remove(),this.el=null)}getElement(){return this.el||this.build(),this.el}build(){this.el=document.createElement("div"),this.el.className=this.className,this.list=document.createElement("ul"),this.el.appendChild(this.list),this.buildList()}reset(){return this.buildList(),this}buildList(){this.list.innerHTML="",this.items.forEach(e=>{const t=this.createItemElement(e);this.list.appendChild(t)})}createItemElement(e){const t=document.createElement("li");return t.setAttribute("data-value",e.value),t.setAttribute("data-uuid",e.uuid),t.innerHTML="<span>"+e.text+"</span>",t.addEventListener("click",t=>{this.onItemSelected(e),this.items.forEach(e=>{this.updateItemElement(e)})}),t}sync(){this.items.forEach(e=>{this.updateItemElement(e)})}updateItemElement(e){const t=this.list.querySelector(`li[data-value="${e.value}"]`);e.disabled?t.classList.add(this.disabledClassName):t.classList.remove(this.disabledClassName),e.selected?t.classList.add(this.selectedClassName):t.classList.remove(this.selectedClassName),!1===e.visible?t.style.display="none":t.style.display=""}}class s{constructor(e={}){this.placeholder=e.placeholder||"Search...",this.minChars=e.minChars||3,this.className=e.className||"nice-searchbox",this.callback=e.callback||(e=>{console.log("Search "+e)}),this.el=null,this.input=null}destroy(){this.input&&(this.input.remove(),this.input=null),this.el&&(this.el.remove(),this.el=null)}getElement(){return this.el||this.build(),this.el}build(){this.el=document.createElement("div"),this.el.className=this.className,this.input=document.createElement("input"),this.input.type="text",this.input.placeholder=this.placeholder,this.el.appendChild(this.input),this.input.addEventListener("input",e=>{let t=null;e.target.value.length>=this.minChars&&(t=e.target.value),this.callback(t)})}reset(){this.input&&(this.input.value="")}}class i{constructor(e={}){this.multiple=e.multiple||!1,this.className=e.className||"current",this.noSelectionMessage=e.noSelectionMessage||"Choose below ...",this.showCount=e.showCount||!1,this.selectionCountMessage=e.selectionCountMessage||"{count} items selected",this.minShowCount=e.minShowCount||3,this.el=null}destroy(){this.el&&(this.el.remove(),this.el=null)}getElement(){return this.el||this.build(),this.el}build(){this.el=document.createElement("span"),this.el.className=this.className}update(e=[]){this.el.className=this.className,0===e.length?(this.el.innerHTML=this.noSelectionMessage,this.el.classList.add("no-selection")):this.multiple&&this.showCount&&e.length>this.minShowCount?(this.el.innerHTML=this.selectionCountMessage.replace("{count}",e.length),this.el.classList.add("count-selection")):(this.el.innerHTML=e.map(e=>"<span>"+e.text+"</span>").join(""),this.el.classList.add("show-selection"))}reset(){this.update()}}class l{static fromData(t=[],s=!1,i={}){const n=e.fromData(t,s);return new l(n.getElement(),i)}static extendConfig(e,t){const s=JSON.parse(JSON.stringify(e));for(const e in t)t.hasOwnProperty(e)&&("object"==typeof t[e]&&null!==t[e]?s[e]=l.extendConfig(s[e],t[e]):s[e]=t[e]);return s}constructor(t,s={}){this.selectElement=t,this.selectElement.style.display="none",this.config=l.extendConfig({disabled:!1,multiple:!1,searchable:!1,showSelection:!1,placeholder:"Choose",searchPlaceholder:"Search",dropdown:{className:"dropdown",selectedClassName:"selected",disabledClassName:"disabled"},search:{className:"searchbox",minChars:3},selection:{className:"current",noSelectionMessage:"Choose below ...",selectionCountMessage:"{count} items selected",showCount:!1,minShowCount:3}},s||{}),this.disabled=this.config.disabled,this.multiple=this.config.multiple,this.searchable=this.config.searchable,this.placeholder=this.config.placeholder;const i=this.determinePlaceholder();i&&(this.placeholder=i),null!==this.selectElement.getAttribute("disabled")&&(this.disabled=!0),null!==this.selectElement.getAttribute("multiple")&&(this.multiple=!0),null!==this.selectElement.getAttribute("data-searchable")&&(this.searchable=!0),this.selectElement.getAttribute("data-current")&&(this.config.showSelection=!0),this.TabIndex=0,this.selectElement.getAttribute("tabindex")&&(this.TabIndex=this.selectElement.getAttribute("tabindex")),this.disabled&&(this.TabIndex=null),this.niceElement=null,this.trigger=null,this.dropdown=null,this.currentSelection=null,this.searchbox=null,this.data=e.fromSelect(this.selectElement),this.render()}destroy(){this.currentSelection&&(this.currentSelection.remove(),this.currentSelection=null),this.searchbox&&(this.searchbox.remove(),this.searchbox=null),this.dropdown&&(this.dropdown.remove(),this.dropdown=null),this.trigger&&(this.trigger.remove(),this.trigger=null),this.niceElement&&(this.niceElement.remove(),this.niceElement=null),this.selectElement.style.display=""}determinePlaceholder(){if(this.selectElement.getAttribute("data-placeholder"))return this.selectElement.getAttribute("data-placeholder");const e=["option[value='']","option[value='0']","option:not([value])"].find(e=>{const t=this.selectElement.querySelector(e);return t&&t.innerText});return e?this.selectElement.querySelector(e).innerText:null}render(){const e=[];e.push("nice-select"),this.disabled&&e.push("disabled"),this.multiple&&e.push("multiple"),this.niceElement=document.createElement("div"),this.niceElement.className=e.join(" "),this.niceElement.tabIndex=this.TabIndex,this.trigger=document.createElement("div"),this.trigger.className="trigger",this.trigger.innerHTML="<span>"+this.placeholder+'</span><span class="arrow"></span>',this.niceElement.append(this.trigger),this.config.showSelection&&(this.currentSelection=new i({multiple:this.multiple,className:this.config.selection.className||"current",noSelectionMessage:this.config.selection.noSelectionMessage||"No selection",showCount:this.config.selection.showCount||!1,selectionCountMessage:this.config.selection.selectionCountMessage||"{count} items selected",minShowCount:this.config.selection.minShowCount||3}),this.niceElement.append(this.currentSelection.getElement())),this.searchable&&(this.searchbox=new s({placeholder:this.config.search.placeholder||"Search...",className:this.config.search.className||"searchbox",minChars:this.config.search.minChars||3,callback:e=>{const t=this.data.filter(e);this.dropdown.sync(t)}}),this.niceElement.append(this.searchbox.getElement())),this.dropdown=new t({className:this.config.dropdown.className||"dropdown",selectedClassName:this.config.dropdown.selectedClassName||"selected",disabledClassName:this.config.dropdown.disabledClassName||"disabled",items:this.data.getItems(),onItemSelected:e=>this.selectItem(e)}),this.niceElement.appendChild(this.dropdown.getElement()),this.selectElement.parentNode.insertBefore(this.niceElement,this.selectElement),this.sync(),this.trigger.addEventListener("click",e=>{e.preventDefault(),this.niceElement.classList.contains("open")?this.close():this.open()}),document.addEventListener("click",e=>{this.searchable&&this.searchbox.getElement().contains(e.target)?this.searchbox.getElement().focus():this.niceElement.contains(e.target)||this.close()})}sync(){const e=this.data.getItems(),t=this.data.getSelection();this.currentSelection&&this.currentSelection.update(t),this.dropdown.setItems(e),this.dropdown.sync()}selectItem(e){console.dir(e),this.data.select(e),this.sync()}reset(){this.data.reset(),this.searchbox&&this.searchbox.reset(),this.sync()}disable(){this.disabled||(this.disabled=!0,this.niceElement.tabIndex=null,this.niceElement.setAttribute("disabled","true"))}enable(){this.disabled&&(this.disabled=!1,this.niceElement.removeAttribute("disabled"))}open(){this.disabled||this.niceElement.classList.contains("open")||(this.niceElement.classList.add("open"),this.searchbox&&this.niceElement.querySelector(".searchbox > input").focus())}close(){this.niceElement.classList.contains("open")&&(this.niceElement.classList.remove("open"),this.niceElement.blur())}bindOpenedEvents(){}unbindOpenedEvents(){}}return l}();e.NiceSelect=t}("undefined"!=typeof window?window:this);
